<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Scenario Generator</title>
    <style>
        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2a 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            color: #e0e0ff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .ultimate-generator {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(20, 20, 40, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.8);
            overflow: hidden;
            border: 1px solid #4444ff;
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, rgba(106, 17, 203, 0.9), rgba(37, 117, 252, 0.9));
            position: relative;
            overflow: hidden;
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ffffff, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .header p {
            color: #ffffff;
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        /* Language Toggle */
        .language-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .lang-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #a0a0ff;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }
        
        .lang-btn.active {
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            color: white;
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
        }
        
        /* Main Tabs */
        .main-tabs {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
            padding: 0 20px 20px;
        }
        
        .main-tab {
            padding: 18px 15px;
            border: none;
            border-radius: 12px;
            background: rgba(30, 20, 50, 0.8);
            color: #d0d0ff;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.1rem;
        }
        
        .main-tab.active {
            background: linear-gradient(45deg, #ff00ff, #ff44ff);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(255, 0, 255, 0.4);
        }
        
        /* Content Area */
        .content-area {
            padding: 20px;
            min-height: 500px;
        }
        
        .generator-content {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Generator Styles */
        .generator-container {
            background: rgba(25, 15, 45, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            border: 1px solid #ff00ff;
        }
        
        .generator-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px dashed #ff00ff;
        }
        
        .generator-header h2 {
            color: #ffd700;
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .generator-header p {
            color: #d2b48c;
            font-size: 1rem;
        }
        
        /* Scenario Display */
        .scenario-display {
            background: linear-gradient(135deg, rgba(30, 10, 50, 0.9), rgba(10, 30, 60, 0.9));
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 2px solid #ff00ff;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
        }
        
        .scenario-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid;
        }
        
        .section-character { border-left-color: #6a11cb; }
        .section-action { border-left-color: #ff416c; }
        .section-location { border-left-color: #38d9a9; }
        .section-object { border-left-color: #ffd700; }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        /* Controls */
        .controls-container {
            background: rgba(30, 20, 50, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #00ced1;
        }
        
        .controls-title {
            color: #00ffff;
            border-bottom: 2px solid #ff00ff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .setting-group {
            margin-bottom: 15px;
        }
        
        .setting-label {
            display: block;
            color: #98fb98;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .setting-select, .setting-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #3cb371;
            background: #0a2a1a;
            color: #d0ffd0;
            font-size: 1rem;
        }
        
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #d8bfd8;
            cursor: pointer;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .action-btn {
            padding: 18px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, var(--btn-color1), var(--btn-color2));
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        }
        
        /* History */
        .history-container {
            background: rgba(30, 20, 50, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #ff00ff;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history-title {
            color: #ff00ff;
            font-size: 1.3rem;
            text-shadow: 0 0 5px rgba(255, 0, 255, 0.5);
        }
        
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(40, 20, 60, 0.6);
            border-radius: 8px;
        }
        
        .history-item {
            margin: 8px 0;
            padding: 10px;
            background: rgba(50, 30, 70, 0.7);
            border-radius: 6px;
            border-left: 3px solid #8a2be2;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .history-item:hover {
            background: rgba(60, 40, 90, 0.9);
            transform: translateX(5px);
        }
        
        /* Instructions */
        .instructions {
            background: linear-gradient(45deg, rgba(40, 10, 60, 0.8), rgba(20, 40, 80, 0.8));
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid #ff00ff;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.3);
            margin-top: 20px;
        }
        
        .instructions h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #d8bfd8;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .main-tab {
                padding: 15px 10px;
                font-size: 0.9rem;
            }
            
            .action-btn {
                padding: 15px;
                font-size: 1rem;
            }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(40, 20, 60, 0.5);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            border-radius: 4px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            z-index: 10000;
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="ultimate-generator">
        <!-- Header -->
        <div class="header">
            <h1>üé≠ Ultimate Scenario Generator</h1>
            <p>G√©n√©rez des sc√©narios complets (personnage + action + lieu + objet) en UN SEUL clic !</p>
        </div>
        
        <!-- Language Toggle -->
        <div class="language-toggle">
            <button class="lang-btn active" onclick="switchLanguage('fr')">
                üá´üá∑ Fran√ßais
            </button>
            <button class="lang-btn" onclick="switchLanguage('en')">
                üá¨üáß English
            </button>
        </div>
        
        <!-- Main Tabs - UN SEUL ONGLET -->
        <div class="main-tabs">
            <button class="main-tab active" data-tab="scenario">
                üé≠ Sc√©nario Complet
            </button>
        </div>
        
        <!-- Content Area -->
        <div class="content-area">
            <!-- Scenario Generator -->
            <div class="generator-content active" id="scenario-generator">
                <div class="generator-container">
                    <div class="generator-header">
                        <h2>üé≠ G√©n√©rateur de Sc√©nario Complet</h2>
                        <p>Cr√©ez instantan√©ment des aventures compl√®tes avec personnage, action, lieu et objet</p>
                    </div>
                    
                    <!-- Affichage du sc√©nario complet -->
                    <div class="scenario-display" id="scenarioDisplay">
                        <div style="text-align: center; padding: 40px; color: #8888aa;">
                            <div style="font-size: 3rem; margin-bottom: 20px;">üé≠</div>
                            <h3>Sc√©nario vide</h3>
                            <p>Cliquez sur "G√©n√©rer le sc√©nario complet" pour cr√©er votre premi√®re aventure !</p>
                        </div>
                    </div>
                    
                    <!-- Contr√¥les pour TOUS les param√®tres -->
                    <div class="controls-container">
                        <div class="controls-title">‚öôÔ∏è Param√®tres du Sc√©nario</div>
                        
                        <!-- Section Personnage -->
                        <div class="scenario-section section-character">
                            <div class="section-title">üë§ Personnage</div>
                            <div class="settings-grid">
                                <div class="setting-group">
                                    <label class="setting-label">üë• Type</label>
                                    <select class="setting-select" id="scenarioCharacterType">
                                        <option value="human">üë§ Humain</option>
                                        <option value="creature">üêâ Cr√©ature</option>
                                        <option value="scifi">üöÄ Sci-Fi</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label class="setting-label">üåç Origine</label>
                                    <select class="setting-select" id="scenarioCharacterOrigin">
                                        <option value="any">üåê Toutes origines</option>
                                        <option value="european">üá™üá∫ Europ√©enne</option>
                                        <option value="african">üåç Africaine</option>
                                        <option value="asian">üá®üá≥ Asiatique</option>
                                        <option value="mixed">üåà M√©tisse</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label class="setting-label">üé≠ Type d'Histoire</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="scenarioQuestType" value="adventure" checked>
                                            üó∫Ô∏è Aventure
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="scenarioQuestType" value="mystery">
                                            üîç Myst√®re
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="scenarioQuestType" value="drama">
                                            üé≠ Drame
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Action -->
                        <div class="scenario-section section-action">
                            <div class="section-title">üé¨ Action</div>
                            <div class="settings-grid">
                                <div class="setting-group">
                                    <label class="setting-label">üé≤ Niveau d'Absurdit√©</label>
                                    <input type="range" min="1" max="100" value="50" class="setting-input" id="scenarioAbsurdityLevel">
                                    <div style="color: #8888aa; font-size: 0.9rem; margin-top: 5px;">Normal ‚Üê ‚Üí Chaos</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Lieu -->
                        <div class="scenario-section section-location">
                            <div class="section-title">üèûÔ∏è Lieu</div>
                            <div class="settings-grid">
                                <div class="setting-group">
                                    <label class="setting-label">üåç Type de Lieu</label>
                                    <select class="setting-select" id="scenarioLocationType">
                                        <option value="exterior">üå≥ Ext√©rieur</option>
                                        <option value="interior">üè† Int√©rieur</option>
                                        <option value="urban">üèôÔ∏è Urbain</option>
                                        <option value="fantasy">üßô Fantasy</option>
                                        <option value="scifi">üöÄ Sci-Fi</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Objet -->
                        <div class="scenario-section section-object">
                            <div class="section-title">‚öîÔ∏è Objet</div>
                            <div class="settings-grid">
                                <div class="setting-group">
                                    <label class="setting-label">üì¶ Cat√©gorie</label>
                                    <select class="setting-select" id="scenarioObjectCategory">
                                        <option value="weapons">‚öîÔ∏è Armes</option>
                                        <option value="armor">üõ°Ô∏è Armures</option>
                                        <option value="magic">üîÆ Artefacts Magiques</option>
                                        <option value="relics">üè∫ Reliques</option>
                                        <option value="tools">üõ†Ô∏è Outils</option>
                                        <option value="jewelry">üíé Bijoux</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Boutons d'action -->
                        <div class="action-buttons">
                            <button class="action-btn" onclick="generateCompleteScenario()" style="--btn-color1: #ff00ff; --btn-color2: #ff44ff;">
                                üé≠ G√©n√©rer le Sc√©nario Complet
                            </button>
                            <button class="action-btn" onclick="generateMultipleScenarios(3)" style="--btn-color1: #8a2be2; --btn-color2: #9400d3;">
                                üîÑ 3 Sc√©narios
                            </button>
                            <button class="action-btn" onclick="copyCompleteScenario()" style="--btn-color1: #00ced1; --btn-color2: #008b8b;">
                                üìã Copier Tout
                            </button>
                            <button class="action-btn" onclick="regenerateComponent('character')" style="--btn-color1: #6a11cb; --btn-color2: #2575fc;">
                                üîÑ Personnage
                            </button>
                            <button class="action-btn" onclick="regenerateComponent('action')" style="--btn-color1: #ff416c; --btn-color2: #ff4b2b;">
                                üîÑ Action
                            </button>
                            <button class="action-btn" onclick="regenerateComponent('location')" style="--btn-color1: #38d9a9; --btn-color2: #20c997;">
                                üîÑ Lieu
                            </button>
                            <button class="action-btn" onclick="regenerateComponent('object')" style="--btn-color1: #ffd700; --btn-color2: #ff8c00;">
                                üîÑ Objet
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Historique -->
            <div class="history-container">
                <div class="history-header">
                    <h3 class="history-title">üìú Historique des Sc√©narios</h3>
                    <button class="lang-btn" onclick="clearHistory()" style="padding: 8px 15px;">
                        üóëÔ∏è Effacer
                    </button>
                </div>
                <div class="history-list" id="historyList">
                    <div style="text-align: center; padding: 20px; color: #8888aa;">
                        Aucun sc√©nario g√©n√©r√© pour le moment
                    </div>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="instructions">
                <h3>üí° Comment utiliser cet outil</h3>
                <ul>
                    <li><strong>R√©glez tous les param√®tres</strong> selon vos pr√©f√©rences</li>
                    <li><strong>Cliquez sur "G√©n√©rer le Sc√©nario Complet"</strong> pour cr√©er instantan√©ment une aventure compl√®te</li>
                    <li><strong>Utilisez les boutons "üîÑ" individuels</strong> pour reg√©n√©rer un seul √©l√©ment</li>
                    <li><strong>"Copier Tout"</strong> copie l'int√©gralit√© du sc√©nario</li>
                    <li><strong>Appuyez sur ESPACE</strong> pour reg√©n√©rer le sc√©nario complet</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURATION GLOBALE ==========
        let currentLanguage = 'fr';
        let currentScenario = {
            character: null,
            action: null,
            location: null,
            object: null
        };
        let history = [];
        
        // ========== TRADUCTIONS ==========
        const translations = {
            fr: {
                title: "üé≠ Ultimate Scenario Generator",
                subtitle: "G√©n√©rez des sc√©narios complets (personnage + action + lieu + objet) en UN SEUL clic !",
                noContent: "Cliquez sur \"G√©n√©rer\" pour commencer !",
                copySuccess: "üìã Sc√©nario copi√© !",
                clearConfirm: "Effacer tout l'historique ?",
                scenarioTitle: "üé≠ G√©n√©rateur de Sc√©nario Complet",
                scenarioSubtitle: "Cr√©ez instantan√©ment des aventures compl√®tes avec personnage, action, lieu et objet"
            },
            en: {
                title: "üé≠ Ultimate Scenario Generator",
                subtitle: "Generate complete scenarios (character + action + location + object) in ONE click!",
                noContent: "Click \"Generate\" to start!",
                copySuccess: "üìã Scenario copied!",
                clearConfirm: "Clear all history?",
                scenarioTitle: "üé≠ Complete Scenario Generator",
                scenarioSubtitle: "Instantly create complete adventures with character, action, location and object"
            }
        };
        
        // ========== BASES DE DONN√âES ==========
        const databases = {
            // Personnages
            characters: {
                names: {
                    european: ["Alexandre", "William", "Sophie", "Isabelle", "Thomas", "Jean", "Marie", "Pierre"],
                    african: ["Kwame", "Aminata", "Chijioke", "Fatoumata", "Kwaku", "Nala"],
                    asian: ["Wei", "Mei", "Jin", "Ling", "Hiro", "Sakura"],
                    mixed: ["Leo", "Alex", "Sam", "Jordan", "Taylor"]
                },
                surnames: {
                    european: ["Smith", "Johnson", "Martin", "Bernard", "Dubois"],
                    african: ["Diallo", "Traor√©", "Ndiaye", "Sow"],
                    asian: ["Wang", "Li", "Zhang", "Chen"],
                    mixed: ["Chen", "Martinez", "Kim", "Patel"]
                },
                descriptions: {
                    human: [
                        "Yeux bleus per√ßants, cheveux bruns fonc√©s, visage anguleux avec une cicatrice discr√®te sur la joue gauche.",
                        "Cheveux blonds v√©nitiens, yeux verts √©meraude, silhouette √©lanc√©e et athl√©tique.",
                        "Porte une expression s√©rieuse, avec des yeux gris acier et des cheveux noirs de jais."
                    ],
                    creature: [
                        "Une cr√©ature majestueuse aux √©cailles iris√©es qui changent de couleur selon la lumi√®re.",
                        "Grande stature, peau verte marbr√©e, yeux jaunes per√ßants et une force impressionnante.",
                        "Ailes membraneuses, griffes ac√©r√©es et une intelligence ancienne dans le regard."
                    ],
                    scifi: [
                        "Cyborg avec des implants cybern√©tiques visibles, peau p√¢le et yeux rouges luminescents.",
                        "Alien humano√Øde avec une peau bleut√©e et des motifs bioluminescents complexes.",
                        "Humain augment√©, uniforme futuriste, regard d√©termin√© et posture martiale."
                    ]
                },
                quests: {
                    adventure: [
                        "Doit retrouver l'artefact perdu de l'ancienne civilisation dans les ruines interdites.",
                        "Part √† la recherche du dragon l√©gendaire qui terrorise les villages du nord.",
                        "Explore les profondeurs oc√©aniques pour d√©couvrir une cit√© sous-marine oubli√©e."
                    ],
                    mystery: [
                        "Enqu√™te sur une s√©rie de disparitions myst√©rieuses dans le manoir hant√©.",
                        "Cherche √† percer le secret d'une soci√©t√© secr√®te qui manipule le gouvernement.",
                        "Tente de comprendre les ph√©nom√®nes √©tranges qui se produisent dans le village isol√©."
                    ],
                    drama: [
                        "Doit faire face √† son pass√© tragique et se r√©concilier avec ses d√©mons int√©rieurs.",
                        "Prot√®ge sa famille tout en luttant contre une maladie incurable.",
                        "Se bat pour retrouver son honneur perdu apr√®s une terrible trahison."
                    ]
                }
            },
            
            // Actions
            actions: {
                verbs: [
                    "Courir", "Sauter", "Danser", "Chanter", "Lire", "√âcrire", "Construire", "D√©truire",
                    "Explorer", "Combattre", "N√©gocier", "Observer", "Apprendre", "Enseigner", "Inventer"
                ],
                contexts: [
                    "dans une biblioth√®que ancienne", "sous la pluie battante", "pendant une √©clipse",
                    "avec une √©p√©e rouill√©e", "tout en r√©solvant une √©nigme", "malgr√© les avertissements"
                ],
                objects: [
                    "un vieux grimoire", "une carte au tr√©sor", "une √©p√©e l√©gendaire", "un cristal magique",
                    "une cl√© myst√©rieuse", "un miroir enchant√©", "une pierre runique", "un parchemin secret"
                ],
                modifiers: [
                    "secr√®tement", "courageusement", "maladroitement", "√©l√©gamment", "sauvagement",
                    "prudemment", "enthousiaste", "r√©ticemment", "magiquement", "scientifiquement"
                ],
                absurdActions: [
                    "Jongler avec des grenades tout en r√©citant de la po√©sie",
                    "Faire du v√©lo √† une roue sur un fil tendu au-dessus d'un volcan",
                    "N√©gocier la paix entre des chats et des chiens lors d'un sommet international"
                ]
            },
            
            // Lieux
            locations: {
                types: {
                    exterior: ["For√™t", "Montagne", "Plage", "D√©sert", "Prairie", "Vall√©e"],
                    interior: ["Ch√¢teau", "Maison", "Taverne", "Biblioth√®que", "Laboratoire", "Temple"],
                    urban: ["Rue", "Place", "March√©", "Parc", "Quartier", "Pont"],
                    fantasy: ["Tour de mage", "Ville naine", "Royaume elfique", "Antre de dragon"],
                    scifi: ["Station spatiale", "Ville futuriste", "Vaisseau-m√®re", "Plan√®te alien"]
                },
                descriptions: {
                    exterior: [
                        "Un lieu paisible o√π la nature r√®gne en ma√Ætre. Les arbres centenaires forment une canop√©e dense.",
                        "Paysage majestueux offrant une vue imprenable sur les vall√©es environnantes.",
                        "√âtendue sauvage o√π le vent sculpte les dunes de sable dor√©."
                    ],
                    interior: [
                        "Pi√®ce spacieuse aux murs de pierre, √©clair√©e par des torches vacillantes.",
                        "Int√©rieur chaleureux avec une chemin√©e cr√©pitante et des √©tag√®res remplies de livres.",
                        "Salle aust√®re aux arches gothiques et aux vitraux color√©s."
                    ],
                    urban: [
                        "Rue anim√©e bord√©e de boutiques color√©es et de caf√©s accueillants.",
                        "Place centrale o√π les habitants se rassemblent pour √©changer nouvelles et marchandises.",
                        "Quartier historique aux b√¢timents anciens et aux ruelles pav√©es."
                    ],
                    fantasy: [
                        "Royaume enchant√© o√π la magie impr√®gne chaque pierre et chaque feuille.",
                        "Citadelle ancienne construite dans la roche vivante par des mains oubli√©es.",
                        "For√™t mystique o√π les arbres murmurent des secrets anciens."
                    ],
                    scifi: [
                        "Structure futuriste aux surfaces lisses et aux lumi√®res n√©on pulsantes.",
                        "Environnement st√©rile o√π chaque d√©tail est optimis√© pour l'efficacit√©.",
                        "Paysage alien avec une v√©g√©tation bioluminescente et des formations cristallines."
                    ]
                }
            },
            
            // Objets
            objects: {
                categories: {
                    weapons: {
                        names: ["√âp√©e", "Hache", "Arc", "Dague", "Masse", "Lance"],
                        prefixes: ["Sacr√©e", "Maudite", "Ancienne", "L√©gendaire", "Magique"],
                        suffixes: ["de la V√©rit√©", "du Dragon", "des Ombres", "de la Justice"]
                    },
                    armor: {
                        names: ["Armure", "Bouclier", "Casque", "Plastron", "Gantelets"],
                        prefixes: ["R√©sistante", "Imperm√©able", "L√©g√®re", "Renforc√©e"],
                        suffixes: ["de la Protection", "de l'Invuln√©rabilit√©"]
                    },
                    magic: {
                        names: ["Orbe", "Amulette", "Baguette", "Talisman", "Parchemin"],
                        prefixes: ["Enchant√©", "Mystique", "Arcanique", "Divin"],
                        suffixes: ["de Puissance", "de Sagesse", "des √âl√©ments"]
                    },
                    relics: {
                        names: ["Relique", "Art√©fact", "Idole", "Pierre", "Sceptre"],
                        prefixes: ["Ancien", "Oubli√©", "Interdit", "Primordial"],
                        suffixes: ["des Anciens", "du Pass√©", "de la Connaissance"]
                    },
                    tools: {
                        names: ["Outil", "Kit", "Instrument", "Dispositif", "Appareil"],
                        prefixes: ["Pr√©cis", "Polyvalent", "Sp√©cialis√©", "Innovant"],
                        suffixes: ["du Artisan", "de Pr√©cision", "de Travail"]
                    },
                    jewelry: {
                        names: ["Bague", "Collier", "Bracelet", "Pendentif", "Boucle"],
                        prefixes: ["√âl√©gant", "Pr√©cieux", "Orn√©", "Lustr√©"],
                        suffixes: ["de l'√âl√©gance", "de la Beaut√©", "du Prestige"]
                    }
                },
                descriptions: {
                    common: "Objet utilitaire de fabrication soign√©e, en bon √©tat g√©n√©ral.",
                    uncommon: "Pi√®ce de qualit√© sup√©rieure avec quelques particularit√©s int√©ressantes.",
                    rare: "Artefact exceptionnel montrant des signes de travail artisanal expert.",
                    epic: "Pi√®ce l√©gendaire impr√©gn√©e d'histoire et de pouvoir.",
                    legendary: "Relique mythique dont on parle dans les anciennes l√©gendes."
                },
                properties: {
                    common: ["Durable", "Pratique", "Fiable", "√âquilibr√©"],
                    uncommon: ["Pr√©cis", "R√©sistant", "√âl√©gant", "Efficace"],
                    rare: ["Puissant", "Ancien", "Magique", "Unique"],
                    epic: ["L√©gendaire", "Divin", "Mythique", "Imbattable"],
                    legendary: ["√âternel", "Cosmique", "Primordial", "Omnipotent"]
                }
            }
        };
        
        // ========== INITIALISATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Charger l'historique depuis localStorage
            loadHistory();
            
            // Raccourci clavier ESPACE
            document.addEventListener('keydown', function(e) {
                if (e.key === ' ' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA' && e.target.tagName !== 'SELECT') {
                    e.preventDefault();
                    generateCompleteScenario();
                }
            });
            
            // G√©n√©rer un sc√©nario initial
            generateCompleteScenario();
        });
        
        // ========== GESTION DES LANGUES ==========
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // Mettre √† jour les boutons de langue
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Mettre √† jour l'interface
            updateInterfaceLanguage();
            
            // Reg√©n√©rer le sc√©nario dans la nouvelle langue
            generateCompleteScenario();
        }
        
        function updateInterfaceLanguage() {
            const t = translations[currentLanguage];
            
            // Mettre √† jour le header
            document.querySelector('.header h1').textContent = t.title;
            document.querySelector('.header p').textContent = t.subtitle;
            
            // Mettre √† jour les titres des g√©n√©rateurs
            document.querySelector('#scenario-generator .generator-header h2').textContent = t.scenarioTitle;
            document.querySelector('#scenario-generator .generator-header p').textContent = t.scenarioSubtitle;
        }
        
        // ========== G√âN√âRATION COMPL√àTE ==========
        function generateCompleteScenario() {
            // 1. G√©n√©rer le personnage
            const characterType = document.getElementById('scenarioCharacterType').value;
            const characterOrigin = document.getElementById('scenarioCharacterOrigin').value;
            const questType = document.querySelector('input[name="scenarioQuestType"]:checked').value;
            
            const character = generateCharacterData(characterType, characterOrigin, questType);
            
            // 2. G√©n√©rer l'action
            const absurdity = parseInt(document.getElementById('scenarioAbsurdityLevel').value);
            const action = generateActionData(absurdity);
            
            // 3. G√©n√©rer le lieu
            const locationType = document.getElementById('scenarioLocationType').value;
            const location = generateLocationData(locationType);
            
            // 4. G√©n√©rer l'objet
            const objectCategory = document.getElementById('scenarioObjectCategory').value;
            const object = generateObjectData(objectCategory);
            
            // Sauvegarder le sc√©nario
            currentScenario = { character, action, location, object };
            
            // Afficher le tout
            displayCompleteScenario();
            
            // Ajouter √† l'historique
            addToHistory({
                type: 'scenario',
                content: `${character.name} - ${action.text.substring(0, 30)}...`,
                fullContent: currentScenario
            });
            
            showNotification(currentLanguage === 'fr' ? 'üé≠ Sc√©nario complet g√©n√©r√© !' : 'üé≠ Complete scenario generated!');
        }
        
        function generateMultipleScenarios(count) {
            let scenarios = [];
            for (let i = 0; i < count; i++) {
                const character = generateCharacterData();
                const action = generateActionData();
                const location = generateLocationData();
                const object = generateObjectData();
                
                scenarios.push({ character, action, location, object });
            }
            
            currentScenario = scenarios[0];
            displayCompleteScenario();
            
            // Ajouter tous √† l'historique
            scenarios.forEach((scenario, index) => {
                addToHistory({
                    type: 'scenario',
                    content: `${scenario.character.name} - Option ${index + 1}`,
                    fullContent: scenario
                });
            });
            
            showNotification(currentLanguage === 'fr' ? `üé≠ ${count} sc√©narios g√©n√©r√©s !` : `üé≠ ${count} scenarios generated!`);
        }
        
        // ========== FONCTIONS DE G√âN√âRATION DE DONN√âES ==========
        function generateCharacterData(type = null, origin = null, questType = null) {
            type = type || document.getElementById('scenarioCharacterType').value;
            origin = origin || document.getElementById('scenarioCharacterOrigin').value;
            questType = questType || document.querySelector('input[name="scenarioQuestType"]:checked').value;
            
            const nameOrigin = origin === 'any' ? 'european' : origin;
            const firstName = getRandomElement(databases.characters.names[nameOrigin] || databases.characters.names.european);
            const surname = getRandomElement(databases.characters.surnames[nameOrigin] || databases.characters.surnames.european);
            const name = `${firstName} ${surname}`;
            const description = getRandomElement(databases.characters.descriptions[type] || databases.characters.descriptions.human);
            const quest = getRandomElement(databases.characters.quests[questType]);
            
            return {
                name,
                description,
                quest,
                type,
                origin,
                questType
            };
        }
        
        function generateActionData(absurdity = null) {
            absurdity = absurdity || parseInt(document.getElementById('scenarioAbsurdityLevel').value);
            
            let action;
            if (absurdity > 70) {
                action = getRandomElement(databases.actions.absurdActions);
            } else {
                const verb = getRandomElement(databases.actions.verbs);
                const context = getRandomElement(databases.actions.contexts);
                const object = getRandomElement(databases.actions.objects);
                const modifier = getRandomElement(databases.actions.modifiers);
                action = `${verb} ${modifier} ${context} avec ${object}`;
            }
            
            return {
                text: action,
                absurdity
            };
        }
        
        function generateLocationData(type = null) {
            type = type || document.getElementById('scenarioLocationType').value;
            
            const locationType = getRandomElement(databases.locations.types[type] || databases.locations.types.exterior);
            const description = getRandomElement(databases.locations.descriptions[type] || databases.locations.descriptions.exterior);
            const time = getRandomElement(['day', 'night', 'twilight']);
            const weather = getRandomElement(['clear', 'cloudy', 'rainy']);
            
            return {
                name: locationType,
                description,
                time,
                weather
            };
        }
        
        function generateObjectData(category = null) {
            category = category || document.getElementById('scenarioObjectCategory').value;
            const rarity = getRandomElement(['common', 'uncommon', 'rare', 'epic', 'legendary']);
            const categoryData = databases.objects.categories[category];
            const name = getRandomElement(categoryData.names);
            const prefix = getRandomElement(categoryData.prefixes);
            const suffix = getRandomElement(categoryData.suffixes);
            const objectName = `${prefix} ${name} ${suffix}`;
            const description = databases.objects.descriptions[rarity];
            const property = getRandomElement(databases.objects.properties[rarity]);
            
            return {
                name: objectName,
                description,
                property,
                rarity,
                category
            };
        }
        
        // ========== AFFICHAGE ==========
        function displayCompleteScenario() {
            const { character, action, location, object } = currentScenario;
            
            const display = document.getElementById('scenarioDisplay');
            display.innerHTML = `
                <div style="text-align: center; margin-bottom: 25px;">
                    <h3 style="color: #ff00ff; font-size: 1.5rem; margin-bottom: 10px;">üé≠ SC√âNARIO COMPLET</h3>
                    <div style="color: #8888aa; font-style: italic;">G√©n√©r√© √† ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                </div>
                
                <div class="scenario-section section-character">
                    <div class="section-title">üë§ ${character.name}</div>
                    <div style="color: #e0e0ff; line-height: 1.6;">
                        <strong>üìù Description :</strong> ${character.description}<br><br>
                        <strong>üé≠ Qu√™te :</strong> ${character.quest}<br><br>
                        <em style="color: #8888aa;">${character.type === 'human' ? 'üë§ Humain' : character.type === 'creature' ? 'üêâ Cr√©ature' : 'üöÄ Sci-Fi'} | ${getOriginName(character.origin)} | üó∫Ô∏è ${character.questType === 'adventure' ? 'Aventure' : character.questType === 'mystery' ? 'Myst√®re' : 'Drame'}</em>
                    </div>
                </div>
                
                <div class="scenario-section section-action">
                    <div class="section-title">üé¨ Action</div>
                    <div style="color: #e0e0ff; line-height: 1.6; font-size: 1.1rem; font-style: italic;">
                        "${action.text}"
                    </div>
                    <div style="margin-top: 10px; color: #8888aa;">
                        <em>Niveau d'absurdit√© : ${action.absurdity}%</em>
                    </div>
                </div>
                
                <div class="scenario-section section-location">
                    <div class="section-title">üèûÔ∏è ${location.name}</div>
                    <div style="color: #e0e0ff; line-height: 1.6;">
                        ${location.description}<br><br>
                        <em style="color: #8888aa;">${getTimeName(location.time)} | ${getWeatherName(location.weather)}</em>
                    </div>
                </div>
                
                <div class="scenario-section section-object">
                    <div class="section-title">‚öîÔ∏è ${object.name}</div>
                    <div style="color: #e0e0ff; line-height: 1.6;">
                        ${object.description}<br><br>
                        <strong>‚öôÔ∏è Propri√©t√© sp√©ciale :</strong> ${object.property}<br><br>
                        <em style="color: #8888aa;">${getRarityName(object.rarity)}</em>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 25px; padding: 15px; background: rgba(255, 0, 255, 0.1); border-radius: 8px;">
                    <strong style="color: #ffd700;">üéØ Synopsis :</strong><br>
                    <em style="color: #e0e0ff;">${character.name} doit ${character.quest.toLowerCase()} en ${action.text.toLowerCase()} dans ${location.name.toLowerCase()}, arm√©(e) de ${object.name.toLowerCase()}.</em>
                </div>
            `;
        }
        
        // ========== REG√âN√âRATION INDIVIDUELLE ==========
        function regenerateComponent(component) {
            switch(component) {
                case 'character':
                    currentScenario.character = generateCharacterData();
                    break;
                case 'action':
                    currentScenario.action = generateActionData();
                    break;
                case 'location':
                    currentScenario.location = generateLocationData();
                    break;
                case 'object':
                    currentScenario.object = generateObjectData();
                    break;
            }
            
            displayCompleteScenario();
            showNotification(currentLanguage === 'fr' ? 
                `üîÑ ${getComponentName(component)} reg√©n√©r√© !` : 
                `üîÑ ${component} regenerated!`);
        }
        
        function getComponentName(component) {
            const names = {
                character: 'Personnage',
                action: 'Action',
                location: 'Lieu',
                object: 'Objet'
            };
            return names[component] || component;
        }
        
        // ========== FONCTIONS UTILITAIRES ==========
        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }
        
        function getOriginName(origin) {
            const names = {
                any: currentLanguage === 'fr' ? 'Toutes origines' : 'Any origin',
                european: currentLanguage === 'fr' ? 'Europ√©enne' : 'European',
                african: currentLanguage === 'fr' ? 'Africaine' : 'African',
                asian: currentLanguage === 'fr' ? 'Asiatique' : 'Asian',
                mixed: currentLanguage === 'fr' ? 'M√©tisse' : 'Mixed'
            };
            return names[origin] || origin;
        }
        
        function getTimeName(time) {
            const names = {
                day: currentLanguage === 'fr' ? '‚òÄÔ∏è Jour' : '‚òÄÔ∏è Day',
                night: currentLanguage === 'fr' ? 'üåô Nuit' : 'üåô Night',
                twilight: currentLanguage === 'fr' ? 'üåÜ Cr√©puscule' : 'üåÜ Twilight'
            };
            return names[time] || time;
        }
        
        function getWeatherName(weather) {
            const names = {
                clear: currentLanguage === 'fr' ? '‚òÄÔ∏è Clair' : '‚òÄÔ∏è Clear',
                cloudy: currentLanguage === 'fr' ? '‚òÅÔ∏è Nuageux' : '‚òÅÔ∏è Cloudy',
                rainy: currentLanguage === 'fr' ? 'üåßÔ∏è Pluvieux' : 'üåßÔ∏è Rainy'
            };
            return names[weather] || weather;
        }
        
        function getRarityName(rarity) {
            const names = {
                common: currentLanguage === 'fr' ? '‚ö™ Commun' : '‚ö™ Common',
                uncommon: currentLanguage === 'fr' ? 'üîµ Peu Commun' : 'üîµ Uncommon',
                rare: currentLanguage === 'fr' ? 'üü£ Rare' : 'üü£ Rare',
                epic: currentLanguage === 'fr' ? 'üü† √âpique' : 'üü† Epic',
                legendary: currentLanguage === 'fr' ? 'üü° L√©gendaire' : 'üü° Legendary'
            };
            return names[rarity] || rarity;
        }
        
        function copyCompleteScenario() {
            const display = document.getElementById('scenarioDisplay');
            const text = display.innerText;
            copyToClipboard(text);
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification(translations[currentLanguage].copySuccess);
            }).catch(err => {
                // Fallback pour anciens navigateurs
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification(translations[currentLanguage].copySuccess);
            });
        }
        
        function showNotification(message) {
            // Supprimer les notifications existantes
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 2000);
        }
        
        // ========== GESTION DE L'HISTORIQUE ==========
        function addToHistory(item) {
            history.unshift({
                ...item,
                timestamp: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            
            // Limiter √† 20 entr√©es
            if (history.length > 20) {
                history = history.slice(0, 20);
            }
            
            updateHistoryDisplay();
            saveHistory();
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #8888aa;">
                        ${currentLanguage === 'fr' ? 'Aucun sc√©nario g√©n√©r√©' : 'No scenarios generated'}
                    </div>
                `;
                return;
            }
            
            let html = '';
            history.forEach((item, index) => {
                html += `
                <div class="history-item" onclick="loadScenarioFromHistory(${index})">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <span style="font-size: 1.2rem; margin-right: 10px;">üé≠</span>
                            <span style="font-weight: bold; color: #ffd700;">${item.content}</span>
                        </div>
                        <div style="font-size: 0.8rem; color: #8888aa;">${item.timestamp}</div>
                    </div>
                </div>
                `;
            });
            
            historyList.innerHTML = html;
        }
        
        function loadScenarioFromHistory(index) {
            const item = history[index];
            if (!item || item.type !== 'scenario') return;
            
            currentScenario = item.fullContent;
            displayCompleteScenario();
            
            showNotification(currentLanguage === 'fr' ? 'üé≠ Sc√©nario charg√© !' : 'üé≠ Scenario loaded!');
        }
        
        function clearHistory() {
            if (history.length === 0) return;
            
            if (confirm(translations[currentLanguage].clearConfirm)) {
                history = [];
                updateHistoryDisplay();
                localStorage.removeItem('scenarioHistory');
                showNotification(currentLanguage === 'fr' ? 'üóëÔ∏è Historique effac√© !' : 'üóëÔ∏è History cleared!');
            }
        }
        
        function saveHistory() {
            try {
                localStorage.setItem('scenarioHistory', JSON.stringify(history));
            } catch (e) {
                console.log("Impossible de sauvegarder l'historique");
            }
        }
        
        function loadHistory() {
            try {
                const saved = localStorage.getItem('scenarioHistory');
                if (saved) {
                    history = JSON.parse(saved);
                    updateHistoryDisplay();
                }
            } catch (e) {
                console.log("Aucun historique sauvegard√©");
            }
        }
    </script>
</body>
</html>